## 設計の道具
### 設計原則
* 単一責任
* オープンクローズド
* リスコフの置換
* インターフェース分離
* 依存性逆転

# 単一責任のクラスを設計する
## クラスに属するものを決める
### 変更が簡単なようにコードを組成する
* 変更は副作用をもたらさない
* 要件の変更が小さければ、コードの変更も相応して小さい
* 既存のコードは簡単に再利用できる
* 最もかんたんな変更方法はコードの追加である。ただし、追加するコードはそれ自体変更が容易なものとする

## 変更を歓迎するコードを書く
### データではなく、振る舞いに依存する
単一責任のクラスを作れば、どんなささいな振る舞いもそれぞれがただ一箇所のみに存在するようになる。
振る舞いにどんな変更があっても、修正する際に一箇所のコードを変更するだけで実現できる。

## あらゆる箇所を単一責任にする
### メソッドから余計な責任を抽出する
メソッドはクラスのように単一の責任を持つべき。
単一責任になると、メソッドの変更も再利用かんたんになる。

単一責任のメソッドがもたらす恩恵
* 隠蔽されていた性質を明らかにする
* コメントをする必要がなくなる
* 再利用を促進する
* 他のクラスへの移動が簡単になる

### クラス内の余計な責任を隔離する
すべてのメソッドを単一責任にしてしまえば、クラスのスコープはより明白になる


# 依存関係を管理する
オブジェクトに望まれる振る舞いは、オブジェクト自身がしっている、または継承している、もしくはそのメッセージを理解するほかのオブジェクトを知っている、のどれか
## 疎結合なコードを書く
### 依存オブジェクトの注入
`20200226.rb`
アプリケーションが拡張され、ディスクやシリンダというオブジェクトを持つようになったとする。
その時、それらを使うギアのギアインチを知りたくなったとしても、Wheelインスタンスがハードコーディングされているため、知ることができない。
GearがWheelに結合しているために、それらを計算することが不可能になっている。

### 依存を隔離する
#### インスタンス変数の作成を分離する
* デフォルト値のハッシュを隔離しマージすることで指定できる -> デフォルト値がより複雑なときに役立つ。デフォルト値が単純な数字や文字列以上のものであるときは、defaultsメソッドを実装する。


#### 依存方向の選択
クラスを人間として考えると、彼らの振る舞いに方にアドバイスをするとすれば、きっと、「自身より変更されないものに依存しなさい」とアドバイスすると思う。
コードに変えれば次の３つの事実が元となっている。

* あるクラスは、他のクラスよりも要件が変わりやすい
* 具象クラスは、抽象クラスよりも変わる可能性が高い
* 多くのところから依存されたクラスを変更すると、広範囲に影響が及ぶ

なるほど。


## インターフェース
### インターフェースを定義する
#### パブリックインターフェース
* クラスの主要な責任を明らかにする
* 外部から実行されることが想定される
* 気まぐれに変更されない
* 他者がそこに依存しても安全
* テストで完全に文書化されている

#### プライベートインターフェース
* 実装の詳細に関わる
* 他のオブジェクトから送られて来ることは想定されていない
* どんな理由でも変更され得る
* 他者がそこに依存するのは危険
* テストでは、言及さえされないこともある
